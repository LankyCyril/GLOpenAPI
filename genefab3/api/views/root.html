<!DOCTYPE html>
<html lang='en'>
    <head>
        <meta charset='utf-8'>
        <meta http-equiv='X-UA-Compatible' content='IE=edge'/>
        <meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>
        <title>$APPNAME</title>
        <link rel='stylesheet' href='https://fonts.googleapis.com/css2?family=Oxygen+Mono&family=Roboto:wght@300;500&display=swap'/>
        <style>
            * {font-size: 13pt; font-family: "Roboto", sans-serif; font-weight: 300}
            a {cursor: pointer; color: #C10; text-decoration: none}
            a:hover {text-decoration: underline}
            b {font-weight: 500}
            strong {color: #00A; font-weight: 500}
            em {font-style: normal; color: black; font-family: "Oxygen Mono", monospace; font-size: 12pt}
            em.remover, em.remover-or {color: #D10; cursor: pointer; border-bottom: 1pt dashed #D10}
            label span {border: 1px solid #BBB; display: inline-block; padding: 1.4pt 1pt; margin: 1pt 3pt; min-width: 100pt}
            select {margin: 1pt 0; min-width: 120pt; max-width: 120pt; overflow: hidden; text-overflow: ellipsis; white-space: nowrap}
            b.header {font-size: 24pt; font-weight: 500}
            h2 {font-size: 20pt; font-weight: 500; display: block; margin: 10pt 0}
            div.description {max-width: 640pt; padding-bottom: 7pt}
            #url-builder {position: sticky; top: 0; background: #FFFFFFEE; z-index: 8}
            #url-wrapper {display: inline-block}
            #url-description {
                display: inline-block; background: #CDF; padding: 5pt;
                border-width: 1pt 1pt 0 1pt;
                border-style: solid; border-color: #AAA;
            }
            #url {
                font-size: 13pt; font-family: "Oxygen Mono", monospace; color: #000;
                padding: 5pt; border: 1px solid #AAA;
                height: 100pt; min-height: 100pt; max-height: 50vh;
                width: 480pt; min-width: 480pt; max-width: 90vw; resize: both;
                word-break: break-all; word-wrap: break-word; overflow-y: auto;
            }
            code {font-family: "Oxygen Mono", monospace; font-size: 12pt; color: #44B !important; background-color: #EEE; white-space: nowrap}
            code b {font-family: "Oxygen Mono", monospace; font-size: 12pt; font-weight: 500; color: #44B}
            #url tt {font-family: "Oxygen Mono", monospace; font-size: 13pt; background: transparent}
            #url tt.base_url, #url tt.pale {color: #AAA;}
            #url tt.plain, #url tt.view {color: #222;}
            #url tt.sep {color: #D10;}
            #url tt.part-level-0 {color: #00C; border: 1px solid #00C4; background: #AAA1}
            #url tt.part-level-1 {color: #08A; border: 1px solid #08A4; background: #AAA1}
            #url tt.part-level-2 {color: #084; border: 1px solid #0844; background: #AAA1}
            #url tt.part-level-3, #url tt.part-level-4 {color: #000; border: 1px solid #CDF2; background: #CDF2}
            #url tt.desaturated {font-size: 8pt; opacity: .7;}
            #url-follow {
                display: inline-block; float: right; background: #DDD; padding: 5pt;
                border-width: 0 1pt 1pt 1pt;
                border-style: solid; border-color: #AAA;
            }
            #url-follow a {color: black; text-decoration: none}
            #selectors {padding-top: 20pt}
            #selectors > div {margin-bottom: 12pt; border-left: 3pt solid #DDD; padding-left: 5pt}
            #selectors > div > div {display: inline-block; vertical-align: top}
            #selectors > div > div ~ div {margin-left: 12pt; margin-top: 3pt}
            #selectors > div > div ~ div input {position: relative; top: 1pt}
            a.add, a.or {color: #777; font-style: italic; border-bottom: 1pt dashed #CCC; text-decoration: none}
            a.del {color: #AAA; font-style: italic; margin-left: 3pt; text-decoration: none}
            .list-item:not(:first-child) em.key {visibility: hidden}
            .or-selects {display: inline-block}
            #footer {margin-top: 24pt; height: 2.5in; max-height: 2.5in; background: #DDD; color: #555}
            #footer table, #footer table * {border: 0; line-height: 1.6; font-size: 11pt}
            #footer table td {vertical-align: top; padding-top: .15in}
            #footer img {height: 2.2in; width: 2.2in; padding-left: .15in; padding-bottom: .15in}
            #footer b.h3 {display: inline-block; transform: scale(1,1.25); margin-bottom: 4pt}
            #subfooter {text-align: center; width: 95; color: #555; margin-top: 8pt; font-size: 9pt}
            #footer a {color: #555; font-size: 11pt}
            #subfooter a {color: #555; font-size: 9pt}
            #footer a:hover, #subfooter a:hover {color: #D10; text-decoration: underline}
        </style>
    </head>
<script src='$URL_ROOT/libs/js/jquery-3.6.0.slim.min.js'></script>
<script>

var url_root = "$URL_ROOT";

var metadata = {
    "wildcard": $METADATA_WILDCARDS,
    "existence": $METADATA_EXISTENCE,
    "equals": $METADATA_EQUALS,
    "assay": $METADATA_ASSAYS,
    "file-datatype": $METADATA_DATATYPES,
};

function trimmed_option(key) {
    var strkey = key.toString()
    if (strkey[0] === "/")
        strkey = strkey.substring(1)
    if (strkey.length <= 64)
        return strkey;
    else
        return strkey.substring(0, 61) + "...";
}

function refresh_all_dropdowns() {
    for (key in metadata) {
        var section_lists = $("#selectors").find(".meta-" + key + ".list-item");
        section_lists.each(function () {
            var section_key = key;
            var section_data = metadata[section_key];
            for (var i = 0;; i++) {
                var section = $(this).find("select.level-"+i);
                if ((section.length > 0) && (section_data !== undefined)) {
                    var current_value = section.val();
                    if (current_value in section_data) {
                        section_key = current_value;
                        section_data = section_data[section_key];
                    }
                    else {
                        section.find("option").remove();
                        for (section_key in section_data) {
                            var key_as_shown = trimmed_option(section_key);
                            var option = new Option(key_as_shown, section_key);
                            $(option).html(key_as_shown);
                            section.append(option);
                            section.val(section_key);
                        }
                        section_data = section_data[section_key];
                    }
                }
                else {
                    break;
                }
            }
        });
    }
}

function refresh_dropdown_section(initiator, key, level) {
    var section_lists = $(initiator).parent();
    section_lists.each(function () {
        var section_key = key;
        if (section_key in metadata) {
            var section_data = metadata[section_key];
            for (var i = 0; i <= level; i++) {
                section_key = $(this).find("select.level-"+i).val();
                section_data = section_data[section_key];
            }
            for (var i = level+1;; i++) {
                var section = $(this).find("select.level-"+i);
                section.find("option").remove();
                for (section_key in section_data) {
                    var key_as_shown = trimmed_option(section_key);
                    var option = new Option(key_as_shown, section_key);
                    $(option).html(key_as_shown);
                    section.append(option);
                    section.val(section_key);
                }
                if ((section_data !== undefined)
                 && (section_data !== true)
                 && (section_key in section_data)) {
                    section_data = section_data[section_key];
                }
                else {
                    break;
                }
            }
        }
    });
}

function refresh_dropdowns(initiator) {
    var key = null, level = null;
    var key_class = $(initiator).parent().attr("class");
    if (key_class !== undefined) {
        var key_matcher = key_class.match(/meta-(\S+)/);
        if (key_matcher !== null) {
            key = key_matcher[1];
        }
    }
    var level_class = $(initiator).attr("class");
    if (level_class !== undefined) {
        var level_matcher = level_class.match(/level-(\d+)/);
        if (level_matcher !== null) {
            level = parseInt(level_matcher[1]);
        }
    }
    if ((key === null) || (level === null)) {
        refresh_all_dropdowns();
    }
    else {
        refresh_dropdown_section(initiator, key, level);
    }
}

function housekeeping(initiator) {
    if ($("#view").val() === "")
        $("#view").val("samples");
    $("#view option[value='']").remove();
    var first_assay_remover = $(
        "#meta-assay-list .list-item:first-child .remover"
    );
    first_assay_remover.removeClass("pipe-remover").html("&amp;");
    refresh_dropdowns(initiator);
}

function strip_special(s) {
    return s.replace(/(^[\/\?]+)|([\/\?]+$)/g, "");
}

function extract_full_base_url(a) {
    return (
        strip_special(a.prop("protocol")) + "//" +
        strip_special(a.prop("hostname")) +
        (a.prop("port") === "" ? "" : ":" + a.prop("port")) + "/"
    )
}

function desaturate_escaped_spaces(s) {
    return s.replace(/(\%..)/g, "<tt class='desaturated'>$1</tt>");
}

function decorate_url(url) {
    var a = $("<a>", {href: url});
    var decorated = (
        "<tt class='base_url'>" + extract_full_base_url(a) +
        "</tt><tt class='view'>" + strip_special(a.prop("pathname")) +
        "</tt><tt class='pale'>/</tt>"
    );
    var tail = strip_special(a.prop("search"));
    var level = 0, sep = "?";
    while (tail) {
        var match = /[\.\|\&\=]/.exec(tail);
        if (match === null) {
            var part = tail;
            tail = "";
        }
        else {
            var part = tail.substring(0, match.index);
            tail = tail.substring(match.index + 1);
        }
        if ((sep === ".") || (sep === "="))
            decorated += "<tt class='plain'>" + sep + "</tt>";
        else
            decorated += "<tt class='sep'>" + sep + "</tt>";
        decorated += (
            "<tt class='part-level-" + level + "'>" +
            desaturate_escaped_spaces(part) + "</tt>"
        );
        if (match !== null)
            sep = match[0];
        if (sep === "&")
            level = 0;
        else if (sep === "=")
            level = 3;
        else if ((sep !== "|") && (level < 4))
            level += 1;
    }
    return decorated;
}

var TARGETS = [
    "wildcard", "existence", "equals", "assay",
    "file-filename-pseudo", "file-datatype-pseudo", "file-datatype",
    "format", "schema", "debug",
];

function generate_url() {
    housekeeping(initiator=this);
    var url = url_root + "/" + escape($("#view").val()) + "/?";
    for (var i = 0, l = TARGETS.length; i < l; i++) {
        var prefix = $(".meta-"+TARGETS[i]+":first-child .included-key").text();
        url += prefix;
        $(".meta-" + TARGETS[i]).each(function () {
            if ($(this).children("input[type=checkbox]").prop("checked")) {
                $(this).find(".key-level").each(function () {
                    var this_val = $(this).val().toString();
                    if (this_val[0] === "/")
                        url = url.replace(/\.+$/g, "");
                    url += escape($(this).val()) + ".";
                });
                var keyunion_level_dropdowns = $(this).find(".keyunion-level");
                if (keyunion_level_dropdowns.length > 0) {
                    keyunion_level_dropdowns.each(function () {
                        url = url + escape($(this).val()) + "|";
                    });
                    url = url.replace(/\|$/g, "&");
                }
                else if (TARGETS[i] == "assay")
                    url = url.replace(/\.+$/g, "|");
                else
                    url = url.replace(/\.+$/g, "&");
                var value_level_dropdowns = $(this).find(".value-level");
                if (value_level_dropdowns.length > 0) {
                    url = url.replace(/&$/g, "=");
                    value_level_dropdowns.each(function () {
                        url += escape($(this).val()) + "|";
                    });
                    url = url.replace(/\|$/g, "&");
                }
            }
        });
        url = url.replace(RegExp(prefix+"$"), "").replace(/\|$/, "&");
    }
    $("#url-description").text("Generated URL:");
    $("#url").html(decorate_url(url));
    $("#url-follow a").attr("href", $("#url").text());
    $("#url-follow").css("background", "lightgreen");
}

function toggle_builder() {
    $(".interactive").show();
    $(".on-newline").css("display", "block");
    $("#noscript").hide();
}

function set_default_repr_of_remover_ors() {
    var i = 0;
    $(".remover-or").each(function () {
        if (++i == 1)
            $(this).html("&amp;");
        else
            $(this).html("|");
    });
}

function remove_last_query_option() {
    $(this).prev().prev().remove();
    $(this).prev("select").remove();
    $(this).remove();
    generate_url();
}

function remove_query_part() {
    if ($(this).parents(".list").children(".list-item").length > 1)
        $(this).parents(".list-item").remove();
    else
        $(this).parents(".list-item")
            .children("input[type=checkbox]")
            .prop("checked", false);
    generate_url();
}

function clone_query_part() {
    var section_name = $(this).attr("class").replace(/\sadd$/g, "");
    var section_list = $("#"+section_name+"-list");
    var section_clone = section_list.children().last("."+section_name).clone();
    if (section_name === "meta-assay") {
        section_clone.children("em.remover").addClass("pipe-remover").html("|");
    }
    section_list.append(section_clone);
    refresh_event_handlers();
    generate_url();
}

function clone_query_or() {
    var section_name = $(this).attr("class").replace(/\sor$/g, "");
    var or_selects = $(this).parent("div").children(".or-selects");
    var new_dropdown = or_selects.children("select").last().clone();
    or_selects.append("<em style='margin-left:3pt;margin-right:3pt'>|</em>");
    or_selects.append(new_dropdown);
    or_selects.append("<a class='del'>x</a>");
    refresh_event_handlers();
    generate_url();
}

function refresh_event_handlers() {
    $(".remover, .remover-or")
        .unbind("mouseover")
        .unbind("mouseout")
        .unbind("click");
    $(".remover, .remover-or").mouseover(function () {$(this).html("&times;")});
    $(".remover").mouseout(function () {
        if ($(this).hasClass("pipe-remover"))
            $(this).html("|");
        else
            $(this).html("&amp;");
    });
    set_default_repr_of_remover_ors();
    $(".remover-or").mouseout(set_default_repr_of_remover_ors);
    $(".remover, .remover-or").click(remove_query_part);
    $("a.add, a.or, a.del, input[type=checkbox], select").unbind("click");
    $("a.add").click(clone_query_part);
    $("a.del").click(remove_last_query_option);
    $("a.or").click(clone_query_or);
    $("input[type=checkbox], select").click(generate_url);
    $("input[type=text]").on("change", generate_url);
    $("input[type=text]").on("input", generate_url);
}

function prefill_example() {
    var initiator = $("#meta-wildcard-list .key-level.level-0")
    initiator.val("study");
    refresh_dropdown_section(initiator, "wildcard", 0);
    $("#meta-wildcard-list .key-level.level-1").val("characteristics");
    initiator = $("#meta-existence-list .key-level.level-0")
    initiator.val("study");
    refresh_dropdown_section(initiator, "existence", 0);
    initiator = $("#meta-existence-list .key-level.level-1")
    initiator.val("factor value");
    refresh_dropdown_section(initiator, "existence", 1);
    $("#meta-existence-list .keyunion-level.level-2").val("spaceflight");
    initiator = $("#meta-equals-list .key-level.level-0");
    initiator.val("investigation");
    refresh_dropdown_section(initiator, "equals", 0);
    initiator = $("#meta-equals-list .key-level.level-1");
    initiator.val("study assays");
    refresh_dropdown_section(initiator, "equals", 1);
    initiator = $("#meta-equals-list .key-level.level-2");
    initiator.val("study assay technology type");
    refresh_dropdown_section(initiator, "equals", 2);
    $("#meta-equals-list .value-level.level-3").val("RNA Sequencing (RNA-Seq)");
    $(".meta-assay.add").click();
    initiator = $("#meta-assay-list .key-level.level-0")
    initiator.val("GLDS-168");
    refresh_dropdown_section(initiator, "assay", 0);
    $("#meta-assay-list .key-level.level-1").val("");
    initiator = $("#meta-assay-list .list-item:first-child .key-level.level-0")
    initiator.val("GLDS-48");
    refresh_dropdown_section(initiator, "assay", 0);
    $("#meta-assay-list .list-item:first-child .key-level.level-1").val("");
    $("#meta-file-datatype-list .value-level").val("unnormalized counts");
    $("#url-description").text("You are here:");
    $("#url").html("$URL_ROOT");
    $("#url-follow a").attr("href", "");
    $("#url-follow").css("background", "#DDD");
    var option = new Option("", "");
    $(option).html("");
    $("select#view").append(option).val("");
}

$(document).ready(function() {
    toggle_builder();
    refresh_dropdowns();
    refresh_event_handlers();
    prefill_example();
});

</script>
    <body>
        <table style='border-left: 0; border-right: 0; border-top: 0; border-bottom: 1px solid black; margin-bottom: 24pt'>
            <tr valign='middle'>
                <td style='width: 260pt'>
                    <img src='https://genelab-data.ndc.nasa.gov/genelab/img/nasa-genelab-logo.png' style='height: 50pt'>
                </td>
                <td><b class='header'>NASA GeneLab Data API</b></td>
                <td style='width: 126pt; text-align: right'>
                    <img src='https://genelab-data.ndc.nasa.gov/genelab/img/nasa_logo.png' style='height: 50pt'>
                </td>
            </tr>
        </table>
        <div id='url-builder' class='interactive' style='display:none'>
            <div id='url-wrapper'>
                <div id='url-description'>You are here:</div>
                <div id='url'>$URL_ROOT</div>
                <div id='url-follow'><a href=''>Follow generated URL</a></div>
            </div>
        </div>
        <div id='noscript' style='display: inline-block; color: #D10; font-weight: bold; padding: 5pt; margin-bottom: 10pt; border: 1px solid #A10'>
            Additional interactive features on this page require a browser with JavaScript support.<br>
        </div>
        <h2>API Syntax</h2>
        <div class='description' style='margin-bottom: 0; padding-bottom: 0'>
            <p>This API provides the means to query the GeneLab database for annotation and data
            associated with datasets, assays, and samples hosted by GeneLab,
            and represents results as tables and/or JSON records.</p>
            <p>Each queriable metadata entry represents a single sample from a single assay and dataset;
            each entry contains nested fields under multiple categories.</p>
            <p>The <code>"id"</code> category contains fields <code>"accession", "assay name", "sample name"</code>.</p>
            <p>The <code>"file"</code> category contains fields <code>"filename", "datatype"</code> and
            contains the information about the files associated with a given sample.</p>
            <p>Finally, the categories <code>"investigation", "study", "assay"</code> are organized according to the
            <a href='https://isa-specs.readthedocs.io/en/latest/'>ISA-Tab model</a>,
            and subsequently contain the following fields, each of which may contain further nested subfields:
            <ul>
                <li>investigation.study</li>
                <li>investigation.study assays</li>
                <li>investigation.investigation</li>
                <li>study.characteristics</li>
                <li>study.factor value</li>
                <li>study.parameter value</li>
                <li>assay.characteristics</li>
                <li>assay.factor value</li>
                <li>assay.parameter value</li>
            </ul></p>
            <p>Request URLs are formed by combining an arbitrary number of queries, described below.</p>
        </div>
        <div id='selectors'>
            <div>
                <div><b>Choice of view level</b></div><br>
                <div class='interactive' style='display:none'>
                    <select id='view'>
                        <option value='' selected></option>
                        <option value='assays'>/assays/</option>
                        <option value='samples'>/samples/</option>
                        <option value='data'>/data/</option>
                    </select>
                </div>
                <div class='description on-newline'>
                    <p>This part of the URL is required.</p>
                    <p>The &quot;assays&quot; view generates overview tables;
                    each column represents a property (such as a factor value), and
                    each row represents one assay, followed by boolean values (True/False)
                    denoting whether a property is associated with the assay.</p>
                    <p>The &quot;samples&quot; view generates annotation (metadata) tables;
                    each column represents a property (such as a factor value), and
                    each row represents one sample, followed by its property values.</p>
                    <p>The &quot;data&quot; view outputs data associated with sample(s);
                    table data is returned in formats 'csv', 'tsv', 'json', 'browser' (see below);
                    raw file data is returned if the requested format is 'raw' and a single file
                    matches the rest of the query.</p>
                    <i>Example:</i>&nbsp;&nbsp;<a href="$URL_ROOT/samples"><code><b>/samples/</b></code></a>
                </div>
            </div>
            <div>
                <div><b>Retrieval of entries from specific<strong>datasets and/or assays</strong>:</b></div><br>
                <div class='interactive' style='display:none'>
                    <div id='meta-assay-list' class='list'>
                        <div class='meta-assay list-item'>
                            <input type='checkbox'>
                            <em class='remover'>&amp;</em>
                            <em class='key included-key'>id=</em>
                            <select class='key-level level-0'></select>
                            <em>.</em>
                            <select class='key-level level-1'></select>
                        </div>
                    </div>
                    <div>
                        <input type='checkbox' class='always-disabled' disabled>
                        <a class='meta-assay add'>OR</a>
                    </div>
                </div>
                <div class='description on-newline'>
                    <p>This part of the URL, as well as all following parts, can be specified any number of times
                    (including zero times).</p>
                    <p>The search can be constrained to only the samples from
                    specific datasets (<code>id.accession=ACCESSION</code>) and/or assays
                    (<code>id.assay name=ASSAY</code>)</p>
                    <p>As a shorthand, it is also possible to pass a mixed query, where accessions and assay names
                    are separated by a forward slash, and multiple accessions / assay names are joined by a vertical pipe
                    (<code>id=ACCESSION_1/ASSAY_1A|ACCESSION_2</code>)</p>
                    <i>Example:</i>&nbsp;&nbsp;<a href="$URL_ROOT/samples/?id.accession=GLDS-38"><code>/samples/?<b>id.accession=GLDS-38</b></code></a><br>
                    <i>Example:</i>&nbsp;&nbsp;<a href="$URL_ROOT/samples/?id=GLDS-38/proteomics|GLDS-276"><code>/samples/?<b>id=GLDS-38/proteomics|GLDS-276</b></code></a>
                </div>
            </div>
            <div>
                <div><b>Retrieval of entries with metadata <strong>categories</strong></b></div><br>
                <div class='interactive' style='display:none'>
                    <div id='meta-wildcard-list' class='list'>
                        <div class='meta-wildcard list-item'>
                            <input type='checkbox'>
                            <em class='remover'>&amp;</em>
                            <select class='key-level level-0'></select>
                            <em>.</em>
                            <select class='key-level level-1'></select>
                        </div>
                    </div>
                    <div>
                        <input type='checkbox' class='always-disabled' disabled>
                        <a class='meta-wildcard add'>AND</a>
                    </div>
                </div>
                <div class='description on-newline'>
                    <p>Information on all values under a given <a href='https://isa-specs.readthedocs.io/en/latest/'>ISA-Tab</a>
                    category can be retrieved: querying directly by any of these categories will constrain the results
                    to only the datasets, assays, and samples that have this category annotated.</p>
                    <p>Under view levels &quot;assays&quot; and &quot;samples&quot;,
                    the values of fields in the category will be reported in table columns.</p>
                    <i>Example:</i>&nbsp;&nbsp;<a href="$URL_ROOT/samples/?study.factor value"><code>/samples/?<b>study.factor value</b></code></a>
                </div>
            </div>
            <div>
                <div><b>Retrieval of entries with metadata <strong>fields</strong></b></div><br>
                <div class='interactive' style='display:none'>
                    <div id='meta-existence-list' class='list'>
                        <div class='meta-existence list-item'>
                            <input type='checkbox'>
                            <em class='remover'>&amp;</em>
                            <select class='key-level level-0'></select>
                            <em>.</em>
                            <select class='key-level level-1'></select>
                            <em>.</em>
                            <div class='or-selects'>
                                <select class='keyunion-level level-2'></select>
                            </div>
                            <a class='meta-existence or'>OR</a>
                        </div>
                    </div>
                    <div>
                        <input type='checkbox' class='always-disabled' disabled>
                        <a class='meta-existence add'>AND</a>
                    </div>
                </div>
                <div class='description on-newline'>
                    <p>Each ISA category contains multiple fields; querying by any such field
                    will constrain the results to only the datasets, assays, and samples that
                    have this field annotated.</p>
                    <p>Under view levels &quot;assays&quot; and &quot;samples&quot;,
                    the values of this field will be reported in table columns.</p>
                    <i>Example:</i>&nbsp;&nbsp;<a href="$URL_ROOT/samples/?study.factor value.spaceflight"><code>/samples/?<b>study.factor value.spaceflight</b></code></a>
                </div>
            </div>
            <div>
                <div><b>Retrieval of entries with metadata field <strong>values</strong></b></div><br>
                <div class='interactive' style='display:none'>
                    <div id='meta-equals-list' class='list'>
                        <div class='meta-equals list-item'>
                            <input type='checkbox'>
                            <em class='remover'>&amp;</em>
                            <select class='key-level level-0'></select>
                            <em>.</em>
                            <select class='key-level level-1'></select>
                            <em>.</em>
                            <select class='key-level level-2'></select>
                            <em>=</em>
                            <div class='or-selects'>
                                <select class='value-level level-3'></select>
                            </div>
                            <a class='meta-equals or'>OR</a>
                        </div>
                    </div>
                    <div>
                        <input type='checkbox' class='always-disabled' disabled>
                        <a class='meta-equals add'>AND</a>
                    </div>
                </div>
                <div class='description on-newline'>
                    <p>The search can be constrained to only the samples that are
                    annotated with a specific value of an ISA field.</p>
                    <p>Under view levels &quot;assays&quot; and &quot;samples&quot;,
                    the values of this field will be reported in table columns.</p>
                    <i>Example:</i>&nbsp;&nbsp;<a href="$URL_ROOT/samples/?study.characteristics.genotype=WT"><code>/samples/?<b>study.characteristics.genotype=WT</b></code></a><br>
                    <i>Example:</i>&nbsp;&nbsp;<a href="$URL_ROOT/samples/?study.characteristics.genotype=WT|TK6"><code>/samples/?<b>study.characteristics.genotype=WT|TK6</b></code></a>
                </div>
            </div>
            <div>
                <div><b><strong>Files or data</strong> to retrieve:</b></div><br>
                <div class='interactive' style='display:none'>
                    <div id='meta-file-filename-pseudo-list' class='list'>
                        <div class='meta-file-filename-pseudo list-item'>
                            <input type='checkbox'>
                            <em class='key'>&amp;</em>
                            <em class='key included-key'>file.filename=</em>
                            <input class='value-level level-0' value="/.*/" type="text"></input>
                        </div>
                    </div>
                </div>
                <div class='interactive on-newline' style='display: none; margin-top: 0'>
                    <div id='meta-file-datatype-pseudo-list' class='list'>
                        <div class='meta-file-datatype-pseudo list-item'>
                            <input type='checkbox'>
                            <em class='key'>&amp;</em>
                            <em class='key included-key'>file.datatype</em>
                            <select class='key-level level-0' style='visibility: hidden'>
                                <option value='' selected></option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class='interactive on-newline' style='display: none; margin-top: 0'>
                    <div id='meta-file-datatype-list' class='list'>
                        <div class='meta-file-datatype list-item'>
                            <input type='checkbox'>
                            <em class='key'>&amp;</em>
                            <em class='key included-key'>file.datatype=</em>
                            <div class='or-selects'>
                                <select class='value-level level-0'></select>
                            </div>
                            <a class='meta-datatype or'>OR</a>
                        </div>
                    </div>
                </div>
                <div class='description on-newline'>
                    <p>For the resultant queried datasets, assays, and samples,
                    there may be files associated. All files with recognized datatypes
                    can be queried by passing <code>file.datatype</code>.</p>
                    <p>The query can be constrained to files of particular datatypes
                    by specifying these datatypes in the query (<code>file.datatype=pca</code>).</p>
                    <p>Finally, the query can be constrained by specifying a full file name
                    of interest or a regular expression pattern enclosed in forward slashes.</p>
                    <i>Examples:</i><br>
                    <a href="$URL_ROOT/samples/?file.datatype"><code>/samples/?<b>file.datatype</b></code></a><br>
                    <a href="$URL_ROOT/samples/?file.datatype=differential expression"><code>/samples/?<b>file.datatype=differential expression</b></code></a><br>
                    <a href="$URL_ROOT/samples/?file.datatype=visualization table|pca"><code>/samples/?<b>file.datatype=visualization table|pca</b></code></a><br>
                    <a href="$URL_ROOT/samples/?file.filename=/trimmed\.fastq\.gz$/"><code>/samples/?<b>file.filename=/trimmed\.fastq\.gz$/</b></code></a>
                </div>
            </div>
            <div>
                <div><b>Display in format:</b></div><br>
                <div class='interactive' style='display:none'>
                    <div id='meta-format-list' class='list'>
                        <div class='meta-format list-item'>
                            <input type='checkbox' checked disabled>
                            <em class='key'>&amp;</em>
                            <em class='key included-key'>format=</em>
                            <select class='value-level level-0'>
                                <option value='browser' selected>browser</option>
                                <option value='tsv'>tsv</option>
                                <option value='csv'>csv</option>
                                <option value='json'>json</option>
                                <option value='cls'>cls</option>
                                <option value='gct'>gct</option>
                                <option value='raw'>raw</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class='interactive on-newline' style='display: none; margin-top: 0'>
                    <div id='meta-schema-list' class='list'>
                        <div class='meta-schema list-item'>
                            <input type='checkbox'>
                            <em class='key'>&amp;</em>
                            <em class='key included-key'>schema=</em>
                            <select class='value-level level-0' disabled>
                                <option value='1' selected>1</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class='description on-newline'>
                    <p>Data returned for the query can be formatted in multiple ways.</p>
                    <p>If an annotation table is requested (as produced by views &quot;assays&quot;, &quot;samples&quot;)
                    formats <code>csv</code>, <code>tsv</code>, <code>json</code> are recommended for programmatic use,
                    and format <code>browser</code> for interactive inspection.<br>
                    <code>schema=1</code> can be passed to output the schema of the tabular data instead.<br>
                    In cases where exactly one annotation column is present (such as a factor value, a characteristic, etc)
                    the <code>cls</code> format is also supported.</p>
                    <p>If data is requested (view &quot;data&quot;) and is expected to be tabular
                    (e.g., unnormalized counts, differential expression, etc),
                    formats <code>csv</code>, <code>tsv</code>, <code>json</code> are recommended as well,
                    and format <code>browser</code> is supported, but discouraged.
                    For data types representable as GCT (RNA-Seq counts, microarray data),
                    the <code>gct</code> format is also supported.</p>
                    <p>The <code>raw</code> format is <i><u>not</u></i> supported for tabular data,
                    and instead exists as the only suitable format for requesting non-tabular data.
                    Note that currently it only resolves successfully if exactly one data file matches the query.</p>
                    <i>Examples:</i><br>
                    <a href="$URL_ROOT/samples/?study.factor value.spaceflight&format=browser">
                        <code>/samples/?study.factor value.spaceflight&<b>format=browser</b></code></a><br>
                    <a href="$URL_ROOT/samples/?study.factor value.spaceflight&format=json">
                        <code>/samples/?study.factor value.spaceflight&<b>format=json</b></code></a><br>
                    <a href="$URL_ROOT/data/?study.characteristics.organism=Homo sapiens&file.datatype=unnormalized counts&format=tsv">
                        <code>/data/?study.characteristics.organism=Homo sapiens&file.datatype=unnormalized counts&<b>format=tsv</b></code></a><br>
                    <a href="$URL_ROOT/data/?file.filename=/R1-FL-A1.*toTransc.*bam$/&id=GLDS-37&format=raw">
                        <code>/data/?file.filename=/R1-FL-A1.*toTransc.*bam$/&id=GLDS-37&<b>format=raw</b></code></a>
                </div>
            </div>
            <!--DEBUG <div>
                <div><b>Debug:</b></div><br>
                <div class='interactive' style='display:none'>
                    <div id='meta-debug-list' class='list'>
                        <div class='meta-debug list-item'>
                            <input type='checkbox'>
                            <em class='key'>&amp;</em>
                            <em class='key included-key'>debug=</em>
                            <select class='value-level level-0' disabled>
                                <option value='1' selected>1</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div> DEBUG-->
        </div>
        <div id='footer'>
            <table style='width: 95%'><tr>
                <td>
                    <img src='https://genelab.nasa.gov/sites/default/files/inline-images/GeneLab_patch.png'>
                </td>
                <td>
                    <b class='h3'>CONTACTS</b><br>
                    NASA Official: Sylvain Costes<br>
                    <a href='https://genelab.nasa.gov/help/contact'><b>Questions and Feedback</b></a><br><br>
                    <b class='h3'>SITE INFORMATION</b><br>
                    &gt; <a href='https://genelab.nasa.gov/overview'>NASA GeneLab Overview</a><br>
                    &gt; <a href='https://genelab.nasa.gov/terms'>Terms and Conditions</a><br>
                    &gt; <a href='https://www.nasa.gov/about/highlights/HP_Privacy.html'>NASA Privacy Policy and Notices</a>
                </td>
                <td>
                    <b class='h3'>OTHER RESOURCES</b><br>
                    &gt; <a href='https://www.nasa.gov/spacebio'>NASA Space Biology Program</a><br>
                    &gt; <a href='https://www.nasa.gov/ames/research/space-biosciences/'>NASA Ames Space Biosciences Division</a><br>
                    &gt; <a href='https://lsda.jsc.nasa.gov/'>NASA Life Sciences Data Archive</a><br>
                    &gt; <a href='https://psi.nasa.gov/'>NASA Physical Science Informatics</a><br>
                    &gt; <a href='https://www.issnationallab.org/'>Center for the Advancement of Science in Space</a>
                </td>
            </tr></table>
        </div>
        <div id='subfooter'>
            <a href='https://www.nasa.gov/'>NASA</a> &nbsp;&nbsp;|&nbsp;&nbsp;
            <a href='http://odeo.hq.nasa.gov/nofear.html'>No Fear Act</a> &nbsp;&nbsp;|&nbsp;&nbsp;
            <a href='http://www.nasa.gov/FOIA'>FOIA</a> &nbsp;&nbsp;|&nbsp;&nbsp;
            <a href='https://www.usa.gov/'>USA.gov</a> &nbsp;&nbsp;|&nbsp;&nbsp;
            <a href='https://get.adobe.com/reader/'>Get Acrobat Reader</a> &nbsp;&nbsp;|&nbsp;&nbsp;
            <a href='mailto:genelab-outreach@lists.nasa.gov'>Contact</a>
        </div>
    </body>
</html>
